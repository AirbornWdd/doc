<mxfile host="app.diagrams.net" modified="2020-07-05T10:19:29.007Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36" etag="GoHs-v77QVZyPYEDPmoX" version="13.3.5" type="github">
  <diagram id="UsODh_B02LaGBhSNhIkN" name="第 1 页">
    <mxGraphModel dx="2399" dy="2059" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="FbpV2jeqrToNIB41JCx8-16" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="-120" y="-130" width="430" height="150" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-5" value="" style="group" vertex="1" connectable="0" parent="FbpV2jeqrToNIB41JCx8-16">
          <mxGeometry width="430" height="150" as="geometry" />
        </mxCell>
        <mxCell id="_XcDRv5XE8WnniG2f3Z3-12" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" parent="FbpV2jeqrToNIB41JCx8-5" vertex="1">
          <mxGeometry width="430" height="150" as="geometry" />
        </mxCell>
        <mxCell id="_XcDRv5XE8WnniG2f3Z3-13" value="&lt;b&gt;&lt;i&gt;BPF_CALL_3(bpf_xdp_redirect_map ...)&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="FbpV2jeqrToNIB41JCx8-5" vertex="1">
          <mxGeometry x="8.775510204081632" width="240" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-4" value="" style="group" vertex="1" connectable="0" parent="FbpV2jeqrToNIB41JCx8-5">
          <mxGeometry x="8.78" y="40" width="411.22" height="100" as="geometry" />
        </mxCell>
        <mxCell id="_XcDRv5XE8WnniG2f3Z3-90" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" parent="FbpV2jeqrToNIB41JCx8-4" vertex="1">
          <mxGeometry width="383.64548104956276" height="100" as="geometry" />
        </mxCell>
        <mxCell id="_XcDRv5XE8WnniG2f3Z3-91" value="&lt;b&gt;&lt;i&gt;DEFINE_PER_CPU(struct bpf_redirect_info, bpf_redirect_info)&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="FbpV2jeqrToNIB41JCx8-4" vertex="1">
          <mxGeometry width="370" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-1" value="u32 ifindex" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-4">
          <mxGeometry x="33.56897959183674" y="30" width="125.88367346938777" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-2" value="struct bpf_map *map" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-4">
          <mxGeometry x="33.56897959183674" y="50" width="125.88367346938777" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-3" value="..." style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-4">
          <mxGeometry x="33.56897959183674" y="70" width="125.88367346938777" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-56" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="-60" width="260" height="80" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-57" value="&lt;b&gt;&lt;i&gt;xdp_do_redirect&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="-60" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-60" value="__bpf_tx_xdp" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="-10" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-66" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="-200" width="260" height="110" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-67" value="&lt;b&gt;&lt;i&gt;xdp_do_redirect_map&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="-200" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-68" value="ri = this_cpu_ptr(&amp;amp;bpf_redirect_info)" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="-170" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-69" value="fwd = __xdp_map_lookup_elem(map, index)" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="342.5" y="-140" width="255" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-71" value="if map != NULL" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="380" y="-40" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-72" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="342.5" y="-290" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-73" value="&lt;b&gt;&lt;i&gt;__bpf_tx_xdp_map&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="345" y="-290" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-74" value="case BPF_MAP_TYPE_XSKMAP:" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="362.5" y="-260" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-76" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="342.5" y="-470" width="367.5" height="150" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-77" value="&lt;b&gt;&lt;i&gt;xsk_rcv&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="345" y="-470" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-78" value="xdp-&amp;gt;rxq-&amp;gt;mem.type == MEM_TYPE_ZERO_COPY" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="362.5" y="-440" width="287.5" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-79" value="__xsk_rcv_zc" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="360" y="-405" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-80" value="&lt;b&gt;__xsk_rcv&lt;/b&gt;&lt;br&gt;__xsk_rcv_memcpy" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="-405" width="180" height="45" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-81" value="xskq_produce_batch_desc" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="413.75" y="-350" width="178.75" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-83" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="730" y="-385" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-84" value="&lt;b&gt;&lt;i&gt;xsk_flush&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="730" y="-385" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-85" value="xs-&amp;gt;sk.sk_data_ready(&amp;amp;xs-&amp;gt;sk)" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="750" y="-355" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-86" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="-290" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-87" value="&lt;b&gt;&lt;i&gt;xdp_do_flush_map&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="652.5" y="-290" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-88" value="case BPF_MAP_TYPE_XSKMAP:" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="670" y="-260" width="210" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-139" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="650" y="-150" width="370" height="170" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-140" value="&lt;b&gt;&lt;i&gt;xdp_umem_assign_dev&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="-150" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-141" value="xdp_reg_umem_at_qid(dev, umem, queue_id)" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="670" y="-120" width="325" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-143" value="&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;bpf.command = XDP_SETUP_XSK_UMEM&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;bpf.xsk.umem = umem&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;bpf.xsk.queue_id = queue_id&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;dev-&amp;gt;netdev_ops-&amp;gt;ndo_bpf(dev, &amp;amp;bpf)&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;umem-&amp;gt;zc = true&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="670" y="-80" width="325" height="90" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-144" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1037.5" y="-77.5" width="370" height="95" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-145" value="&lt;b&gt;&lt;i&gt;xdp_reg_umem_at_qid&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="1047.5" y="-77.5" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-147" value="&lt;div style=&quot;text-align: left&quot;&gt;dev-&amp;gt;_rx[queue_id].umem = umem&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;dev-&amp;gt;_tx[queue_id].umem = umem&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="1060" y="-45" width="325" height="45" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-149" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="1430" y="-780" width="370" height="480" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-50" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-149">
          <mxGeometry x="-392.5" y="420" width="290" height="110" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-51" value="&lt;span&gt;&lt;b&gt;&lt;i&gt;xsk_mmap&lt;/i&gt;&lt;/b&gt;&lt;/span&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-149">
          <mxGeometry x="-392.5" y="420" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-52" value="pfn = virt_to_phys(q-&amp;gt;ring) &amp;gt;&amp;gt; PAGE_SHIFT" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-149">
          <mxGeometry x="-372.5" y="450" width="250" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-53" value="remap_pfn_range(vma, vma-&amp;gt;vm_start, pfn,&amp;nbsp;size, vma-&amp;gt;vm_page_prot" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-149">
          <mxGeometry x="-377.5" y="480" width="260" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-150" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="70" y="-480" width="240" height="335" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-124" value="" style="group" vertex="1" connectable="0" parent="FbpV2jeqrToNIB41JCx8-150">
          <mxGeometry y="185" width="230" height="150" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-125" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-124">
          <mxGeometry width="230" height="150" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-126" value="&lt;b&gt;&lt;i&gt;xsk_proto_ops&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-124">
          <mxGeometry x="20" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-127" value=".sendmsg&amp;nbsp; &amp;nbsp; = xsk_sendmsg" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=left;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-124">
          <mxGeometry x="20" y="30" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-128" value=".mmap&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;= xsk_mmap" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=left;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-124">
          <mxGeometry x="20" y="50" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-129" value=".poll&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;= xsk_poll" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=left;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-124">
          <mxGeometry x="20" y="70" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-130" value=".bind&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;= xsk_bind" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=left;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-124">
          <mxGeometry x="20" y="90" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-131" value=".setsockopt = xsk_setsockopt" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=left;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-124">
          <mxGeometry x="20" y="110" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-29" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-150">
          <mxGeometry width="230" height="90" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-30" value="&lt;b&gt;&lt;i&gt;xsk_family_ops&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-150">
          <mxGeometry x="20" width="100" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-42" value=".family = PF_XDP" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=left;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-150">
          <mxGeometry x="20" y="30" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-132" value=".create = xsk_create" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=left;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-150">
          <mxGeometry x="20" y="50" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-136" value="" style="group" vertex="1" connectable="0" parent="FbpV2jeqrToNIB41JCx8-150">
          <mxGeometry y="95" width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-133" value="sk = sk_alloc(net, PF_XDP, GFP_KERNEL, &amp;amp;xsk_proto, kern)" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-136">
          <mxGeometry width="240" height="70" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-134" value="&lt;b&gt;&lt;i&gt;xsk_create&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-136">
          <mxGeometry x="5" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-152" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="660" y="60" width="322.5" height="70" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-89" value="" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-152">
          <mxGeometry width="322.5" height="70" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-61" value="i40e" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-152">
          <mxGeometry x="11.25" y="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-63" value="mlx5" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-152">
          <mxGeometry x="91.25" y="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-64" value="tun" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-152">
          <mxGeometry x="171.25" y="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-65" value="veth" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-152">
          <mxGeometry x="251.25" y="30" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-90" value="&lt;b&gt;&lt;i&gt;drivers&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="FbpV2jeqrToNIB41JCx8-152">
          <mxGeometry width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-121" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1040" y="-230" width="370" height="120" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-122" value="&lt;b&gt;&lt;i&gt;xsk_bind&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="1050" y="-230" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-123" value="dev = dev_get_by_index(sock_net(sk), sxdp-&amp;gt;sxdp_ifindex)" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="1060" y="-200" width="325" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-138" value="xdp_umem_assign_dev(xs-&amp;gt;umem, dev, qid, flags)" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="1082.5" y="-160" width="287.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-117" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1037.5" y="-580" width="290" height="200" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-118" value="&lt;b&gt;&lt;i&gt;xsk_setsockopt&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="1037.5" y="-580" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-120" value="switch (optname) {&lt;br&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;case XDP_RX_RING:&lt;br&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;case XDP_TX_RING:&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;xsk_init_queue(entries, q, false)&lt;br&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;case XDP_UMEM_REG:&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;xdp_umem_create(&amp;amp;mr)&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;WRITE_ONCE(xs-&amp;gt;umem, umem)&lt;br&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;case XDP_UMEM_FILL_RING:&lt;br&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;case XDP_UMEM_COMPLETION_RING:&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;xsk_init_queue(entries, q, true)&lt;br&gt;}" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="1052.5" y="-560" width="260" height="170" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-91" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1040" y="-730" width="367.5" height="135" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-92" value="&lt;b&gt;&lt;i&gt;xsk_sendmsg&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="1050" y="-730" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-93" value="struct sock *sk = sock-&amp;gt;sk" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1060" y="-700" width="150" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-97" value="struct xdp_sock *xs = xdp_sk(sk)" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1060" y="-675" width="196.25" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-98" value="xs-&amp;gt;zc ?&amp;nbsp;xsk_zc_xmit(sk) : xsk_generic_xmit(sk, m,total_len)" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1114" y="-645" width="196.25" height="40" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-106" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1430" y="-390" width="367.5" height="115" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-107" value="&lt;b&gt;&lt;i&gt;xsk_zc_xmit&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="1440" y="-390" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-108" value="struct net_device *dev = xs-&amp;gt;dev" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1450" y="-360" width="190" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-110" value="dev-&amp;gt;netdev_ops-&amp;gt;ndo_xsk_wakeup(dev, xs-&amp;gt;queue_id)" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1448.75" y="-325" width="330" height="30" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-111" value="" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1430" y="-245" width="367.5" height="135" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-112" value="&lt;b&gt;&lt;i&gt;xsk_generic_xmit&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="1">
          <mxGeometry x="1437.5" y="-245" width="120" height="20" as="geometry" />
        </mxCell>
        <mxCell id="FbpV2jeqrToNIB41JCx8-114" value="&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;while (xskq_peek_desc(xs-&amp;gt;tx, &amp;amp;desc)) {&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;buffer = xdp_umem_get_data(xs-&amp;gt;umem, desc.addr)&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;skb_store_bits(skb, 0, buffer, len)&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&amp;nbsp; &amp;nbsp; dev_direct_xmit(skb, xs-&amp;gt;queue_id)&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="1441.25" y="-215" width="318.75" height="90" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
